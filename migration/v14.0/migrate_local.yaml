bundle: gist-v14.0-migration
variables:
  action_queries_path: "./queries/action/local"
  reporting_queries_path: "./queries/report/default"
  input: "./input"
  output: "./output"
  report: "./reports"

tools:
  - name: "replace-classes"
    type: "sparql"
    query: "{action_queries_path}/replaceClassesInDefaultGraph.rq"
  - name: "replace-properties-with-inverses"
    type: "sparql"
    query: "{action_queries_path}/replacePropertiesWithInversesInDefaultGraph.rq"

actions:
  # transform actions
  # note: first transform is input -> output
  #   following are output -> output
  - action: "transform"
    message: "Replace classes in default graph."
    tool: "replace-classes"
    source: "{output}"
    target: "{output}"
    includes:
      - "*.ttl"
      - "*.owl"
  - action: "transform"
    message: "Replace properties with inverses in default graph."
    tool: "replace-properties-with-inverses"
    source: "{output}"
    target: "{output}"
    includes:
      - "*.ttl"
      - "*.owl"

  # validation
  - action: "verify"
    message: "Check for issues that should be reviewed."
    type: "construct"
    inference: "none"
    stopOnFail: false
    source: "{output}"
    target: "{report}"
    includes:
      - "*.ttl"
      - "*.owl"
    queries:
      source: "{reporting_queries_path}/"
      includes:
        - "detect_removed_default_graph.rq"
        - "detect_produces_default_graph.rq"
        - "detect_offers_default_graph.rq"
        - "detect_event_disjoint_default_graph.rq"
