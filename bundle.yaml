bundle: gist
variables:
  name: "gist"
  version: "X.x.x"
  input: "."
  rdf-toolkit: "{input}/tools/rdf-toolkit.jar"
  output: "{name}{version}_webDownload"
tools:
- name: "serializer"
  type: "Java"
  jar: "{rdf-toolkit}"
  arguments:
    - "-sfmt"
    - "turtle"
    - "-tfmt"
    - "turtle"
    - "-sdt"
    - "explicit"
    - "-dtd"
    - "-ibn"
    - "-s"
    - "{inputFile}"
    - "-t"
    - "{outputFile}"
- name: "xml-serializer"
  type: "Java"
  jar: "{rdf-toolkit}"
  arguments:
    - "-sfmt"
    - "turtle"
    - "-tfmt"
    - "rdf-xml"
    - "-sdt"
    - "explicit"
    - "-dtd"
    - "-ibn"
    - "-s"
    - "{inputFile}"
    - "-t"
    - "{outputFile}"
- name: "json-serializer"
  type: "Java"
  jar: "{rdf-toolkit}"
  arguments:
    - "-sfmt"
    - "turtle"
    - "-tfmt"
    - "json-ld"
    - "-sdt"
    - "explicit"
    - "-dtd"
    - "-ibn"
    - "-s"
    - "{inputFile}"
    - "-t"
    - "{outputFile}"
actions:
- action: "mkdir"
  directory: "{output}"
- action: "copy"
  source: "{input}"
  target: "{output}"
  replace:
    from: "X.x.x"
    to: "{version}"
  rename:
    from: "(.*)\\.ttl"
    to: "\\g<1>{version}.ttl"
  includes:
    - "*.ttl"
- action: "definedBy"
  source: "{output}"
  target: "{output}"
  includes:
    - "*.ttl"
- action: "transform"
  tool: "serializer"
  source: "{output}"
  target: "{output}"
  includes:
    - "*.ttl"
- action: "transform"
  tool: "xml-serializer"
  source: "{output}"
  target: "{output}"
  rename:
    from: "(.*)\\.ttl"
    to: "\\g<1>.rdf"
  includes:
    - "*.ttl"
- action: "transform"
  tool: "json-serializer"
  source: "{output}"
  target: "{output}"
  rename:
    from: "(.*)\\.ttl"
    to: "\\g<1>.json"
  includes:
    - "*.ttl"
- action: "copy"
  source: "{input}/LICENSE.txt"
  target: "{output}"
- action: "copy"
  source: "{input}/docs"
  target: "{output}/Documentation"
  replace:
    from: "X.x.x"
    to: "{version}"
  includes:
    - "ReleaseNotes.md"
- action: "markdown"
  source: "{output}/Documentation/ReleaseNotes.md"
  target: "{output}/Documentation/ReleaseNotes.html"
- action: "move"
  source: "{output}"
  target: "{output}/Deprecated"
  includes:
    - "*Deprecated*.ttl"
    - "*Deprecated*.rdf"
    - "*Deprecated*.json"
